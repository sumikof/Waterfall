# BSD-002 セキュリティ基本設計書 テンプレート

## セクション構成

```markdown
## 1. セキュリティ設計方針

### 1.1 目的・基本方針
（REQ-006 のセキュリティ要件から）

### 1.2 準拠標準・規制
- 準拠するセキュリティ標準（OWASP Top 10・ISO 27001 等）:
- 法的要件（個人情報保護法・GDPR 等）:

---

## 2. 認証・認可設計

### 2.1 認証方式

| 方式 | 採用 | 詳細 |
|---|---|---|
| セッション認証 | ○/× | |
| JWT（Bearer Token） | ○/× | |
| OAuth 2.0 / OIDC | ○/× | |
| APIキー | ○/× | |

### 2.2 ロール・権限設計

| ロール | 概要 | アクセス可能リソース |
|---|---|---|
| 管理者 | | |
| 一般ユーザー | | |
| ゲスト | | |

### 2.3 セッション管理
- セッション有効期限:
- リフレッシュトークン方針:
- 多重ログイン制御:
- ログアウト処理:

---

## 3. 通信暗号化

| 通信経路 | プロトコル | TLSバージョン | 証明書管理 |
|---|---|---|---|
| ブラウザ ↔ サーバ | HTTPS | TLS 1.2+ | |
| サーバ間通信 | HTTPS | TLS 1.2+ | |
| DB接続 | TLS | | |

---

## 4. データ保護方針

### 4.1 保管データの暗号化
- パスワード: ハッシュ化方式（例: bcrypt, Argon2）
- 個人情報: 暗号化方針
- 機密データ: マスキング・暗号化方針

### 4.2 個人情報管理
- 取得する個人情報の種類:
- 保存期間・廃棄方針:
- アクセスログ管理:

---

## 5. 脆弱性対策方針

| 脅威 | 対策 |
|---|---|
| SQLインジェクション | プリペアドステートメント・ORMの使用 |
| XSS | 出力エスケープ・CSPヘッダー設定 |
| CSRF | CSRFトークン・SameSite Cookie |
| 不正アクセス | レート制限・ロックアウト |
| 機密情報漏洩 | 環境変数管理・ログマスキング |
| 依存ライブラリ脆弱性 | 定期的な脆弱性スキャン |

---

## 6. セキュリティヘッダー設定

```http
Content-Security-Policy: ...
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
Strict-Transport-Security: max-age=31536000; includeSubDomains
```

---

## 7. セキュリティ監査・ログ

- 認証ログ（成功・失敗）: 保存先・保存期間
- 操作ログ: 対象操作・保存先
- 異常検知: アラート条件・通知先

---

## 8. 後続フェーズへの影響

| 影響先 | 内容 |
|---|---|
| DSD-001 | バックエンド実装での認証・認可処理 |
| DSD-003 | APIの認証ヘッダー仕様 |
| ST-003 | セキュリティテストの確認観点 |
```
