# BSD-005 API基本設計書 テンプレート

## セクション構成

```markdown
## 1. API設計方針

### 1.1 アーキテクチャスタイル
- REST / GraphQL / gRPC など
- APIバージョニング方針: （例: URL パス方式 `/api/v1/`）
- ベースURL: `https://{ドメイン}/api/v1`

### 1.2 共通仕様

**リクエストヘッダー:**
| ヘッダー | 説明 | 必須 |
|---|---|---|
| `Content-Type` | `application/json` | ○ |
| `Authorization` | `Bearer {token}` | 認証必須エンドポイント |

**レスポンス形式（成功）:**
```json
{
  "data": { ... },
  "meta": { "total": 100, "page": 1 }
}
```

**レスポンス形式（エラー）:**
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "入力値が不正です",
    "details": [ ... ]
  }
}
```

**共通エラーコード:**
| HTTPステータス | エラーコード | 説明 |
|---|---|---|
| 400 | `VALIDATION_ERROR` | バリデーションエラー |
| 401 | `UNAUTHORIZED` | 認証エラー |
| 403 | `FORBIDDEN` | 権限エラー |
| 404 | `NOT_FOUND` | リソース未存在 |
| 500 | `INTERNAL_ERROR` | サーバ内部エラー |

---

## 2. エンドポイント一覧

（REQ-003 のユースケース・REQ-005 の機能一覧から）

| No. | HTTPメソッド | エンドポイント | 機能概要 | 認証要否 | 関連FEAT-ID |
|---|---|---|---|---|---|
| 1 | GET | `/api/v1/{resource}` | 一覧取得 | 要 | FEAT-XXX |
| 2 | POST | `/api/v1/{resource}` | 新規作成 | 要 | FEAT-XXX |
| 3 | GET | `/api/v1/{resource}/{id}` | 詳細取得 | 要 | FEAT-XXX |
| 4 | PUT | `/api/v1/{resource}/{id}` | 更新 | 要 | FEAT-XXX |
| 5 | DELETE | `/api/v1/{resource}/{id}` | 削除 | 要 | FEAT-XXX |

---

## 3. エンドポイント詳細

### {No.} {HTTPメソッド} {エンドポイント}

**概要**: {処理の説明}
**認証**: 要 / 不要
**権限**: {必要なロール}

**リクエスト:**
| パラメータ | 種別 | 型 | 必須 | 説明 |
|---|---|---|---|---|
| `id` | パスパラメータ | string | ○ | リソースID |
| `page` | クエリパラメータ | integer | × | ページ番号 |
| `name` | リクエストボディ | string | ○ | 名称 |

**レスポンス（成功 200）:**
```json
{
  "data": {
    "id": "xxx",
    "name": "名称"
  }
}
```

**エラーレスポンス:**
| ステータス | コード | 発生条件 |
|---|---|---|
| 400 | `VALIDATION_ERROR` | 入力値不正 |
| 404 | `NOT_FOUND` | 対象リソース未存在 |

（エンドポイント数分繰り返す）

---

## 4. 外部API連携

（REQ-007 が存在する場合）

| 外部システム | エンドポイント | 用途 | 認証方式 |
|---|---|---|---|

---

## 5. 後続フェーズへの影響

| 影響先 | 内容 |
|---|---|
| DSD-003 | 各エンドポイントの詳細仕様（全パラメータ・バリデーション） |
| IT-002 | API結合テストの確認対象 |
```
