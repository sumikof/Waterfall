# BSD-001 システムアーキテクチャ設計書 テンプレート

## セクション構成

```markdown
## 1. システム概要

### 1.1 目的・スコープ
（REQ-001 の目的・背景から）

### 1.2 システム全体構成図
（Mermaid の graph TD でフロントエンド・バックエンド・DB・外部システムの関係を図示）

### 1.5 アーキテクチャスタイルと DDD 整合

#### アーキテクチャスタイル選定

| 候補 | 概要 | 適用判断 | 選定理由 |
|---|---|---|---|
| レイヤードアーキテクチャ | プレゼンテーション→アプリケーション→ドメイン→インフラの4層構成 | 採用 / 不採用 | |
| ヘキサゴナルアーキテクチャ | ポート＆アダプタによる外部依存の分離 | 採用 / 不採用 | |
| クリーンアーキテクチャ | 依存性の方向を内側（ドメイン）に統一 | 採用 / 不採用 | |

#### レイヤー責務定義

| レイヤー | 責務 | 依存方向 |
|---|---|---|
| プレゼンテーション層 | HTTP リクエスト受付・レスポンス返却・入力バリデーション | → アプリケーション層 |
| アプリケーション層 | ユースケース実行・トランザクション制御・ドメインサービス呼び出し | → ドメイン層 |
| ドメイン層 | 純粋なビジネスロジック・エンティティ・値オブジェクト・ドメインイベント | 依存なし（最内層） |
| インフラストラクチャ層 | DB アクセス・外部 API 呼び出し・メッセージング・リポジトリ実装 | → ドメイン層（インターフェース実装） |

#### 境界づけられたコンテキストの配置戦略

| 戦略 | 概要 | 適用判断 | 選定理由 |
|---|---|---|---|
| モノリス内モジュール | 単一アプリケーション内でモジュール（パッケージ/ネームスペース）で分離 | 採用 / 不採用 | |
| モジュラーモノリス | モノリス内で厳密なモジュール境界を設け、将来の分離に備える | 採用 / 不採用 | |
| マイクロサービス | コンテキストごとに独立したサービスとしてデプロイ | 採用 / 不採用 | |

> 詳細は BSD-009（ドメインモデル設計書）、BSD-010（データアーキテクチャ設計書）を参照。

---

## 2. 技術スタック

| 領域 | 技術・フレームワーク | バージョン | 選定理由 |
|---|---|---|---|
| フロントエンド | | | |
| バックエンド | | | |
| データベース | | | |
| キャッシュ | | | |
| メッセージキュー | | | |
| 認証 | | | |

（REQ-001の技術要件・REQ-006の非機能要件から）

---

## 3. インフラ構成

### 3.1 環境一覧

| 環境 | 用途 | ホスト/クラウド | 備考 |
|---|---|---|---|
| 開発（development） | | | |
| テスト（staging） | | | |
| 本番（production） | | | |

### 3.2 インフラ構成図
（Mermaid でサーバ・ロードバランサ・DB・CDNなどを図示）

### 3.3 ネットワーク構成
- 外部公開ポート:
- 内部通信ポート:
- VPC/セキュリティグループ方針:

---

## 4. デプロイ構成

### 4.1 コンテナ/サービス構成
（Docker Compose・Kubernetes・ECSなどの構成概要）

### 4.2 CI/CDパイプライン概要
（ビルド・テスト・デプロイの流れ）

---

## 5. 通信方式

| 通信 | プロトコル | 形式 | 認証 |
|---|---|---|---|
| フロントエンド ↔ バックエンド | HTTPS/REST | JSON | JWT / セッション |
| バックエンド ↔ DB | TCP | - | パスワード認証 |
| バックエンド ↔ 外部API | HTTPS | JSON/XML | APIキー |

---

## 6. スケーラビリティ・可用性方針

### 6.1 スケーラビリティ
（REQ-006 の性能要件から: 水平スケーリング方針など）

### 6.2 可用性目標
（REQ-006 の可用性要件から: SLA目標・冗長化方針）

### 6.3 障害対策
- フェイルオーバー方針:
- バックアップ方針:

---

## 7. 後続フェーズへの影響

| 影響先 | 内容 |
|---|---|
| BSD-009 | ドメインモデル設計（DDD 戦略設計）の前提となるアーキテクチャスタイル |
| BSD-010 | データアーキテクチャ設計の前提となるインフラ・DB構成 |
| DSD-001〜006 | 技術スタック・構成に基づく詳細設計 |
| DSD-007 | コーディング規約の前提となるフレームワーク |
| DSD-009_{FEAT-ID} | DDD レイヤード構成に基づくドメインモデル詳細設計 |
| IMP-003 | 環境構築手順の前提 |
```
