---
name: requirements-definition
description: |
  要件定義書作成スキル。ドメイン駆動設計（DDD）の概念（ユビキタス言語・境界づけられたコンテキスト・ドメインモデル）を活用し、ビジネス担当者・発注者へのヒアリングを繰り返しながら要件定義ドキュメント一式を作成する。

  以下の場合に使用する：
  - 「要件定義書を作って」「要件をまとめて」「ヒアリングしてほしい」などの依頼
  - 新規システムの要件定義
  - 既存システムの機能追加・改修の要件定義

  成果物は REQ フェーズの Markdown ドキュメント群（REQ-001〜REQ-008）。
  ファイルの配置先・命名規則は references/document-list.md を参照。
---

# 要件定義書作成スキル

## 概要

DDD の概念を活用し、ビジネス担当者へのヒアリングを7フェーズで進め、要件定義書（REQ-001〜REQ-008）を作成する。

参照ファイル：
- ヒアリング質問集 → `references/interview-guide.md`
- ドキュメントテンプレート → `references/document-templates.md`
- 配置ルール・ドキュメント定義 → `references/document-list.md`

## ワークフロー

### フェーズ 1: プロジェクト種別の確認

最初に確認する：
- 新規構築 か 改修/機能追加 か
- プロジェクト名（PRJ-{NNN} の割り当て）
- ヒアリング相手の役割・業種

### フェーズ 2: ドメイン発見

目標：ビジネス全体像・目的・課題を把握する。`interview-guide.md` の「フェーズ2」質問を参考にする。

- システムが解決するビジネス課題と目標
- 主要なステークホルダーと利用者（アクター）
- 現状の痛点・既存システムの課題

### フェーズ 3: ユビキタス言語の確立

目標：ドメイン固有の用語を統一する。

- ヒアリング中に出てきたドメイン用語・業界用語を記録する
- 曖昧な表現は具体的な定義に落とし込む
- 収集した用語は最終的に REQ-008 に反映する

### フェーズ 4: 境界づけられたコンテキストの特定

目標：システムの境界とサブドメインを定義する。

- 業務を構成する主要な「領域」を洗い出す（例：注文管理、在庫管理）
- 各コンテキストの責務と境界を確認する
- 外部システムとの連携箇所を特定する（→ REQ-007）

### フェーズ 5: ドメインモデルの構築

目標：主要なエンティティ・値オブジェクト・集約を特定する。

- 「システムが管理する主なモノ・概念」を聞き出す
- エンティティ（IDを持つもの）と値オブジェクトを区別する
- 集約ルートと整合性境界を特定する
- エンティティ間の関係（1対多・多対多）を確認する
- 識別したモデルは REQ-001 のドメインモデルセクションに反映する

### フェーズ 6: ユースケース・業務フローの定義

目標：アクターの行動とシステムの振る舞いを定義する。

- 各アクターのユースケースを列挙する
- 主要ユースケースのメインフロー・代替フロー・例外フローを確認する
- 業務ルール（ビジネスルール）を聞き出す
- 画面が必要な操作を洗い出す（→ REQ-004）
- 成果物：REQ-002、REQ-003、REQ-004、REQ-005

### フェーズ 7: 非機能要件の確認

目標：品質属性・制約条件を定義する。

- 性能（同時接続数・レスポンスタイム）
- セキュリティ（認証方式・データ保護）
- 可用性（稼働率・メンテナンス窓口）
- 保守性・拡張性の要求
- 成果物：REQ-006

### フェーズ 8: ドキュメント生成

`references/document-templates.md` のテンプレートを使い、REQ-001〜REQ-008 を Markdown ファイルとして出力する。

配置先：
- REQ-001〜REQ-004 → `projects/PRJ-{NNN}_{プロジェクト名}/REQ/`
- REQ-005〜REQ-008 → `docs/REQ/`

改修プロジェクトの場合は変更対象のドキュメントのみ作成する。

## ヒアリングの進め方

- **一度に多くを聞かない**: 1回のやり取りで2〜3問まで
- **言葉を繰り返す**: ユーザーの発言の用語をそのまま使い、ユビキタス言語として記録する
- **要約確認**: 各フェーズの終わりに内容を要約してユーザーに確認する
- **不明点は掘り下げる**: 曖昧な回答には「具体的には？」「例えばどのような場合ですか？」と追質問する
- **ゴールを示す**: フェーズ移行前に「次はXXXについて確認させてください」と予告する
