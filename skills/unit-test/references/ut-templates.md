# 単体テスト関連テンプレート集

本ファイルは、IMP ドキュメントのうちテスト結果に関するセクションの書き方ガイドと、TDD 不具合管理票のテンプレートを提供する。

> **注意**: IMP-001/IMP-002 の完全なテンプレートは実装スキル（`skills/implementation/references/imp-templates.md`）に含まれる。本ファイルはテスト結果セクションの書き方に特化した断片である。

## 目次

- [IMP-001 セクション3: TDD テスト結果（バックエンド）](#imp-001-セクション3-tdd-テスト結果バックエンド)
- [IMP-002 セクション4: TDD テスト結果（フロントエンド）](#imp-002-セクション4-tdd-テスト結果フロントエンド)
- [IMP-005: TDD不具合管理票](#imp-005-tdd不具合管理票)

---

## IMP-001 セクション3: TDD テスト結果（バックエンド）

IMP-001（バックエンド実装・単体テスト完了報告書）のセクション3に記載するテスト結果の書き方。

### 3.1 テストケース一覧（DSD-008 対応）

DSD-008 のテストケース ID と 1:1 で対応させる。テスト名は振る舞いを記述する（「〜の場合〜になる」形式）。

```markdown
| テストケースID | テスト名 | 区分 | 結果 | テストファイルパス |
|---|---|---|---|---|
| TC-001 | {DSD-008 のテストケース名} | 正常系 / 異常系 | ✅ GREEN | `{テストファイルパス}` |
```

記載のポイント：
- **テストケースID**: DSD-008 で定義した ID をそのまま使用する
- **テスト名**: テストコード上の関数名・メソッド名と一致させる
- **区分**: 正常系 / 異常系 / 境界値 のいずれか
- **結果**: 全テストが ✅ GREEN であること（RED のまま完了しない）
- **テストファイルパス**: テストコードの相対パスを記載する

### 3.2 テスト結果サマリー

```markdown
| 区分 | テスト数 | 成功 | 失敗 | スキップ |
|---|---|---|---|---|
| ユニットテスト（TDD） | {数} | {数} | 0 | {数} |

**カバレッジ**: {全体}% （ステートメント: {%}, 分岐: {%}, 関数: {%}）
```

記載のポイント：
- **失敗**: TDD 完了時は必ず 0 であること
- **スキップ**: 正当な理由がある場合のみ許容（理由を備考に記載）
- **カバレッジ**: テストツールの出力をそのまま記載する

### 3.3 テストコード配置

```markdown
| テスト種別 | ディレクトリ |
|---|---|
| ユニットテスト | `{テストディレクトリパス}` |
| モック定義 | `{モックディレクトリパス}` |
```

---

## IMP-002 セクション4: TDD テスト結果（フロントエンド）

IMP-002（フロントエンド実装・単体テスト完了報告書）のセクション4に記載するテスト結果の書き方。

### 4.1 テストケース一覧（DSD-008 対応）

```markdown
| テストケースID | テスト名 | 区分 | 結果 | テストファイルパス |
|---|---|---|---|---|
| TC-001 | {DSD-008 のテストケース名} | レンダリング / インタラクション / API連携 | ✅ GREEN | `{テストファイルパス}` |
```

記載のポイント：
- **区分**: フロントエンドのテスト区分（レンダリング / インタラクション / API連携 / エラー表示 / 空状態）
- その他はバックエンドと同様

### 4.2 テスト結果サマリー

```markdown
| 区分 | テスト数 | 成功 | 失敗 | スキップ |
|---|---|---|---|---|
| コンポーネントテスト（TDD） | {数} | {数} | 0 | {数} |

**カバレッジ**: {全体}% （ステートメント: {%}, 分岐: {%}）
```

### 4.3 テストコード配置

```markdown
| テスト種別 | ディレクトリ |
|---|---|
| コンポーネントテスト | `{テストディレクトリパス}` |
| モック・スタブ | `{モックディレクトリパス}` |
```

---

## IMP-005: TDD不具合管理票

**ファイル名**: `IMP-005_tdd-defect-list.md`
**配置先**: `projects/PRJ-{NNN}_{プロジェクト名}/IMP/`
**作成単位**: プロジェクト共通（全 FEAT-ID の TDD 中に発見した不具合を集約）
**更新タイミング**: TDD サイクル中に不具合を発見した都度、随時追記する

```markdown
# IMP-005 TDD不具合管理票

| 項目 | 値 |
|---|---|
| ドキュメントID | IMP-005 |
| プロジェクトID | PRJ-{NNN} |
| 最終更新日 | YYYY-MM-DD |

> TDD サイクル（Red→Green→Refactor）中に発見した不具合を記録する。
> 全機能（FEAT-ID）の不具合をこのファイルに集約する。

---

## 不具合一覧

| バグID | FEAT-ID | 発生箇所 | 重大度 | 発見フェーズ | 内容 | 対応状況 | 修正日 |
|---|---|---|---|---|---|---|---|
| BUG-001 | FEAT-{NNN} | {クラス/コンポーネント名} | 高/中/低 | Red / Green / Refactor | {不具合の内容} | 修正済み / 対応中 / 保留 | YYYY-MM-DD |

## 重大度定義

| 重大度 | 定義 |
|---|---|
| 高 | 機能が動作しない / テストが通らない根本的な問題 |
| 中 | 機能は動作するが DSD 仕様と異なる / カバレッジ不足 |
| 低 | コーディング規約違反 / リファクタリング対象 |

## 統計サマリー

| FEAT-ID | 発生数 | 修正済み | 対応中 | 保留 |
|---|---|---|---|---|
| FEAT-{NNN} | {数} | {数} | {数} | {数} |
| **合計** | {数} | {数} | {数} | {数} |
```
