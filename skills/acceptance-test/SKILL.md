---
name: acceptance-test
description: |
  受入テスト（UAT）スキル。システムテスト完了報告書（ST-001）と要件定義書を入力とし、
  ユーザー視点の業務シナリオテストを実施し、受入テスト仕様・結果書（UAT-001）・
  不具合管理票（UAT-002）・受入完了報告書（UAT-003）を出力する。

  以下の場合に使用する：
  - 「受入テストして」「UATフェーズを実施して」「UAT-001を作成して」などの依頼
  - ST-001（システムテスト仕様・結果書）が PASS しているプロジェクトの受入テスト
  - ユーザー・発注者視点での業務要件充足確認
  - 受入完了後のリリース可否判断（UAT-003作成）

  入力: REQ-001, REQ-002, REQ-003, ST-001, ST-004（保留不具合確認）
  出力: projects/PRJ-{NNN}/UAT/ 以下の UAT-001〜UAT-003
  配置ルール・ドキュメント定義 → references/document-list.md
---

# 受入テストスキル（UAT）

## 概要

要件定義書・システムテスト結果書を読み込み、ユーザー視点で業務要件の充足を検証し、受入テスト仕様・結果書と受入完了報告書を作成する。

参照ファイル：
- UAT ドキュメントテンプレート → `references/uat-templates.md`
- 配置ルール・ドキュメント定義 → `references/document-list.md`

## テスト実施順序

```
UAT-001（受入テスト仕様・結果書）← ユーザーシナリオテストを実施しながら作成
  ↓ 完了後
UAT-002（不具合管理票）          ← テスト中随時更新。UAT-001完了後に集計
  ↓ 全不具合対応後
UAT-003（受入完了報告書）        ← リリース可否判断・関係者承認のために作成
```

| ドキュメント | 作成タイミング |
|---|---|
| UAT-001 | 受入テスト実施中・完了後 |
| UAT-002 | 不具合発見の都度随時更新 |
| UAT-003 | UAT-001・UAT-002 完了後 |

## 前提確認

受入テスト開始前に以下を確認する：

1. **プロジェクト ID の確認**: PRJ-{NNN} と出力先ディレクトリ
2. **ST-001 完了の確認**: ST-001（システムテスト）が PASS していること
3. **ST-004 の保留不具合確認**: ST フェーズから持ち越された保留不具合を把握する
4. **受入テスト実施者の確認**: ユーザー代表・発注者・業務担当者など UAT 実施主体を確認する
5. **テスト環境の確認**: UAT 用環境（本番相当）が利用可能であること
6. **受入基準の確認**: BSD-008 の UAT 合格基準・受入条件を確認する

## 入力ドキュメントの読み込み方針

```
最初に読む（スコープ把握・受入基準確認）
  projects/PRJ-{NNN}/BSD/BSD-008_test-plan.md          ← UAT合格基準・受入条件
  projects/PRJ-{NNN}/ST/ST-001_system-test.md          ← STテスト結果・UAT申し送り
  projects/PRJ-{NNN}/ST/ST-004_defect-list.md          ← ST保留不具合の把握

UAT-001（受入テスト仕様書）設計時に参照する
  projects/PRJ-{NNN}/REQ/REQ-001_system-requirements.md   ← システム要件（受入基準）
  projects/PRJ-{NNN}/REQ/REQ-002_business-requirements.md ← 業務要件・業務ルール
  projects/PRJ-{NNN}/REQ/REQ-003_use-cases.md             ← ユースケース（シナリオ設計元）
```

> ST-001 の「UATフェーズへの申し送り事項」と REQ-002 の業務ルールを必ず確認してからシナリオ設計を開始する。

## 受入テストワークフロー（UAT-001）

### ステップ 1: 受入シナリオを設計する

REQ-002（業務要件）・REQ-003（ユースケース）を元に、ユーザー視点の受入シナリオ TODO リストを作る。

```
[ ] 主要業務フロー全体の動作確認（ユーザーが実際に使う一連の操作）  ← まずこれ
[ ] 業務ルールの充足確認（REQ-002の各業務ルールが守られているか）
[ ] ST 保留不具合 BUG-NNN の再確認
[ ] 画面・帳票・メッセージの文言確認（業務担当者視点）
...（テスト中に気づいたケースを随時追記）
```

テストケース ID は `UTC-{NNN}` 形式（プロジェクト内で連番）で採番する。

**シナリオ設計の観点**：
- ユーザー・業務担当者が実際に行う操作手順で設計する（技術的な視点ではなく業務視点）
- REQ-003 の主シナリオ・代替シナリオを網羅する
- ST フェーズの保留不具合を再確認するシナリオを含める
- 業務上クリティカルな操作を優先する

### ステップ 2: テスト仕様を設計する

| 定義項目 | 内容 |
|---|---|
| 前提条件 | テスト実行前のシステム状態・テストデータ・ユーザー権限 |
| 操作手順 | ユーザーが実際に行う画面操作の手順（業務言語で記述） |
| 期待値 | 業務要件・ユースケースで定義された期待される動作 |

テスト仕様と結果は **同一テーブルに共存させる**（仕様設計後に結果列を埋める）。

### ステップ 3: テストを実施し完了判定する

1. テスト環境とテストデータを準備する
2. 各テストケースを実施し、結果（OK / NG / SKIP）を記録する
3. NG の場合は UAT-002 に不具合を登録し、BUG-ID を記録する
4. **重大度「高」の不具合はただちにユーザーに報告する**

| 判定基準 | 内容 |
|---|---|
| PASS 条件 | 全 UTC が OK または SKIP（SKIP は理由必記）。重大度「高」の不具合が残存しないこと |
| FAIL 条件 | NG が残存（特に業務上クリティカルな項目は修正必須） |
| 品質基準 | BSD-008 の UAT 合格基準を参照 |

## 不具合管理（UAT-002）

不具合 ID は `BUG-{NNN}` 形式でプロジェクト内連番（**ST-004 の採番から継続して通番**）。

> ST-004 の BUG-NNN の続きから採番する（例: ST-004 が BUG-010 まで使用している場合、UAT-002 は BUG-011 から開始）。

| 重大度 | 定義 | 対応方針 |
|---|---|---|
| 高 | 業務が成立しない / 受入基準を満たさないクリティカルな不具合 | **即時ユーザー報告** + 修正・再テスト必須 |
| 中 | 業務要件と動作が異なる / 一部シナリオが失敗するが回避策あり | 修正後に再テスト |
| 低 | 軽微な表示差異・文言の誤り・UX 上の改善点 | リリース判定でユーザーが合否を決定 |

## 受入完了報告書（UAT-003）の作成

UAT-001・UAT-002 が完了した後、リリース可否判断のために UAT-003 を作成する。

UAT-003 に含める内容：
- テスト実施概要（期間・実施者・テスト環境）
- テスト結果サマリー（UAT-001 の集計）
- 不具合サマリー（UAT-002 の集計）
- **リリース可否判断**（PASS / CONDITIONAL PASS / FAIL）
- 残課題・保留事項とリリース後の対応方針
- 関係者承認欄

## 出力ドキュメントの作成

`references/uat-templates.md` のテンプレートを使い、以下を作成する：

| ドキュメント | 作成タイミング | 配置先 |
|---|---|---|
| UAT-001_acceptance-test.md | 受入テスト完了後 | `projects/PRJ-{NNN}/UAT/` |
| UAT-002_defect-list.md | 不具合発見の都度随時更新 | `projects/PRJ-{NNN}/UAT/` |
| UAT-003_acceptance-report.md | UAT-001・UAT-002 完了後 | `projects/PRJ-{NNN}/UAT/` |

## リリースフェーズへの申し送り原則

UAT 完了後、リリースフェーズへの申し送りを行う：

1. **リリース可否の明示**: UAT-003 にリリース可否判断を明記し、関係者の承認を得る
2. **保留不具合の引き継ぎ**: UAT-002 の保留不具合をリリース後の対応方針とともに記載する
3. **受入条件付き PASS の場合**: 条件（修正必須項目・確認事項）を明記する
4. **本番環境固有の確認事項**: テスト環境と本番環境の差異・本番でのみ確認できる事項を申し送る
